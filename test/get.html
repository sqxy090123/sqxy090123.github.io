<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>获取设备信息</title>
    <style>
      /* 页面样式 */
    </style>
  </head>
  <body>
    <!-- 警告信息 -->
    <div id="warning-dialog" style="display:none;">
      <p>警告：获取设备信息可能造成设备卡顿、发热、耗电过高、移动数据使用异常等情况。</p>
      <p>是否继续？</p>
      <button id="ok-button">确认</button>
      <button id="cancel-button">取消</button>
    </div>

    <!-- 获取信息按钮 -->
    <button id="get-info-button">开始获取</button>
    <p id="result"></p>

    <script type="text/javascript">
      var getInfoButton = document.getElementById("get-info-button");
      var result = document.getElementById("result");
      var intervalId = null;
      var warningDialog = document.getElementById("warning-dialog");
      var okButton = document.getElementById("ok-button");
      var cancelButton = document.getElementById("cancel-button");
      var isWarningAccepted = false;

      // 如果浏览器不支持，则禁用按钮
      if (!navigator) {
        result.innerHTML = "浏览器不支持该功能。";
        getInfoButton.disabled = true;
      }

      // 获取设备信息的函数
      function getDeviceInfo() {
        // 检查用户是否接受了警告信息
        if (!isWarningAccepted) {
          warningDialog.style.display = "block";
          return;
        }

        var batteryPromise = getBatteryInfo();
        var positionPromise = getPositionInfo();

        Promise.all([batteryPromise, positionPromise]).then(function(results) {
          // 获取设备信息
        });
      }

      // 获取电池信息的函数
      function getBatteryInfo() {
        // 获取电池信息
      }

      // 获取设备位置信息的函数
      function getPositionInfo() {
        // 获取设备位置信息
      }

      // 获取设备方向的函数
      function getOrientation() {
        // 获取设备方向
      }

      // 获取 IP 地理位置的函数
      function getIpPosition() {
        // 获取IP地址的地理位置信息
      }

      // 点击确认按钮后隐藏警告信息并设置标志变量为true
      okButton.onclick = function() {
        warningDialog.style.display = "none";
        isWarningAccepted = true;
      };

      // 点击取消按钮后隐藏警告信息并设置标志变量为false
      cancelButton.onclick = function() {
        warningDialog.style.display = "none";
        isWarningAccepted = false;
      };

      // 按钮的点击事件处理函数
      getInfoButton.onclick = function() {
        if (!intervalId) {
          intervalId = setInterval(getDeviceInfo, 10);
          getInfoButton.innerHTML = "停止获取";
          getInfoButton.classList.add("stop");
        } else {
          clearInterval(intervalId);
          intervalId = null;
          result.innerHTML = "";
          getInfoButton.innerHTML = "开始获取";
          getInfoButton.classList.remove("stop");
        }
      };

      // 禁用复制功能-已关闭

    </script>

    <div class="footer">
      <div class="footer-inner">
        <p>&copy; <a href="https://sqxy090123.github.io/" target="_blank">sqxy090123</a> 2023</p>
      </div>
    </div>
  </body>
</html>
